@if (Buttons.Any(b => b.Visible))
{
    <Card Class="mb-4 dashboard-group-card" Style="border: 2px solid #FFE4A1; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 16px rgba(151, 50, 45, 0.12); background: white;">
        <CardHeader Style="background: linear-gradient(135deg, #97322D 0%, #7A2824 100%); padding: 16px 24px; border-bottom: 3px solid #FFE4A1;">
            <CardTitle Style="color: #FFE4A1; font-weight: 700; font-size: 1.2rem; margin: 0; display: flex; align-items: center; text-shadow: 1px 1px 2px rgba(0,0,0,0.2);">
                @if (!string.IsNullOrEmpty(Icon))
                {
                    <i class="@Icon me-3" style="font-size: 1.4rem;"></i>
                }
                @GroupName
            </CardTitle>
        </CardHeader>
        <CardBody Style="padding: 32px; background: linear-gradient(180deg, #FFFEF9 0%, #FFF9ED 100%);">
            <div class="d-flex flex-wrap justify-content-center button-grid" style="gap: 120px; margin: 0 auto;">
                @foreach (var btn in Buttons.Where(x => x.Visible))
                {
                    <div class="dashboard-button-wrapper" style="width: 180px; max-width: calc(20% - 20px);">
                        <Card Class="h-100 text-center dashboard-item-card"
                              Style="border: 2px solid #FFE4A1; border-radius: 16px; cursor: pointer; transition: all 0.3s ease; background: white; box-shadow: 0 3px 10px rgba(151, 50, 45, 0.1);"
                              @onclick="@btn.OnClick">
                            <div Style="padding: 24px 16px 16px 16px;">
                                <div style="height: 100px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px;">
                                    <CardImage Src="@(!string.IsNullOrEmpty(btn.ImageSrc) ? btn.ImageSrc : "https://via.placeholder.com/128")"
                                               Style="max-height: 100px; max-width: 100px; object-fit: contain; filter: drop-shadow(2px 2px 4px rgba(151, 50, 45, 0.15));" />
                                </div>
                                <div Style="padding: 12px 8px; background: linear-gradient(135deg, #97322D 0%, #7A2824 100%); border-radius: 10px; box-shadow: 0 3px 8px rgba(151, 50, 45, 0.3); min-height: 56px; display: flex; align-items: center; justify-content: center;">
                                    <div style="color: #FFE4A1; font-weight: 600; font-size: 0.95rem; line-height: 1.4; text-shadow: 1px 1px 2px rgba(0,0,0,0.2);">
                                        @btn.Text
                                    </div>
                                </div>
                            </div>
                        </Card>
                    </div>
                }
            </div>
        </CardBody>
    </Card>
}

<style>
    .dashboard-group-card {
        animation: fadeInUp 0.5s ease;
    }

    @@keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .button-grid {
        max-width: 100%;
    }

    .dashboard-button-wrapper {
        flex: 0 0 auto;
    }

    /* Đảm bảo tối đa 5 button trên 1 hàng */
    @@media (min-width: 1400px) {
        .dashboard-button-wrapper {
            width: calc(20% - 20px);
            min-width: 180px;
        }
    }

    @@media (max-width: 1399px) and (min-width: 992px) {
        .dashboard-button-wrapper {
            width: calc(25% - 20px);
            min-width: 180px;
        }
    }

    @@media (max-width: 991px) and (min-width: 768px) {
        .dashboard-button-wrapper {
            width: calc(33.333% - 20px);
            min-width: 180px;
        }
    }

    @@media (max-width: 767px) {
        .dashboard-button-wrapper {
            width: calc(50% - 20px);
            min-width: 160px;
        }
    }

    @@media (max-width: 480px) {
        .dashboard-button-wrapper {
            width: 100%;
            max-width: 100%;
        }
    }

    .dashboard-item-card {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
    }

        .dashboard-item-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 10px 30px rgba(151, 50, 45, 0.3) !important;
            border-color: #97322D !important;
        }

        .dashboard-item-card:active {
            transform: translateY(-5px) scale(1.02);
        }

    .dashboard-button-wrapper {
        animation: fadeIn 0.6s ease backwards;
    }

        .dashboard-button-wrapper:nth-child(1) {
            animation-delay: 0.1s;
        }

        .dashboard-button-wrapper:nth-child(2) {
            animation-delay: 0.15s;
        }

        .dashboard-button-wrapper:nth-child(3) {
            animation-delay: 0.2s;
        }

        .dashboard-button-wrapper:nth-child(4) {
            animation-delay: 0.25s;
        }

        .dashboard-button-wrapper:nth-child(5) {
            animation-delay: 0.3s;
        }

        .dashboard-button-wrapper:nth-child(6) {
            animation-delay: 0.35s;
        }

        .dashboard-button-wrapper:nth-child(7) {
            animation-delay: 0.4s;
        }

        .dashboard-button-wrapper:nth-child(8) {
            animation-delay: 0.45s;
        }

        .dashboard-button-wrapper:nth-child(9) {
            animation-delay: 0.5s;
        }

        .dashboard-button-wrapper:nth-child(10) {
            animation-delay: 0.55s;
        }

    @@keyframes fadeIn {
        from {
            opacity: 0;
            transform: scale(0.8);
        }

        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    /* Ripple effect on click */
    .dashboard-item-card::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 228, 161, 0.4);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
    }

    .dashboard-item-card:active::after {
        width: 250px;
        height: 250px;
    }

    /* Glow effect khi hover */
    .dashboard-item-card:hover::before {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(45deg, #FFE4A1, #97322D, #FFE4A1);
        border-radius: 16px;
        z-index: -1;
        opacity: 0.7;
        filter: blur(8px);
        animation: rotate 3s linear infinite;
    }

    @@keyframes rotate {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }
</style>

@code {
    [Parameter] public string GroupName { get; set; }
    [Parameter] public List<DashboardButton> Buttons { get; set; } = new();
    [Parameter] public string Icon { get; set; } = "";
}