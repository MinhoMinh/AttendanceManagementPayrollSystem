
@using System.Globalization
@using AttendanceManagementPayrollSystem.DTO


@code {
    [Parameter] public PayRunItemDto? Item { get; set; }
}

@if (Item == null)
{
    <p>No data.</p>
}
else
{
    <div class="card p-3 mb-3">
        <h4>Pay Run Item</h4>
        <table class="table table-sm">
            <tr><th>ID</th><td>@Item.ItemId</td></tr>
            <tr><th>Employee</th><td>@Item.EmpName</td></tr>
            <tr><th>Gross Pay</th><td>@Item.GrossPay.ToString("C", CultureInfo.CurrentCulture)</td></tr>
            <tr><th>Deductions</th><td>@Item.Deductions.ToString("C", CultureInfo.CurrentCulture)</td></tr>
            <tr><th>Net Pay</th><td>@Item.NetPay.ToString("C", CultureInfo.CurrentCulture)</td></tr>
            <tr><th>Notes</th><td>@Item.Notes</td></tr>
        </table>
    </div>

    <div class="card p-3">
        <h5>Components</h5>
        @if (Item.Components == null || !Item.Components.Any())
        {
            <p>No components.</p>
        }
        else
        {
            <table class="table table-bordered table-sm">
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Code</th>
                        <th>Description</th>
                        <th>Amount</th>
                        <th>Taxable</th>
                        <th>Insurable</th>
                        <th>Created</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var c in Item.Components)
                    {
                        <tr>
                            <td>@c.ComponentType</td>
                            <td>@c.ComponentCode</td>
                            <td>@c.Description</td>
                            <td>@c.Amount.ToString("C", CultureInfo.CurrentCulture)</td>
                            <td>@(c.Taxable == true ? "Yes" : "No")</td>
                            <td>@(c.Insurable == true ? "Yes" : "No")</td>
                            <td>@c.CreatedAt?.ToShortDateString()</td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>
}
