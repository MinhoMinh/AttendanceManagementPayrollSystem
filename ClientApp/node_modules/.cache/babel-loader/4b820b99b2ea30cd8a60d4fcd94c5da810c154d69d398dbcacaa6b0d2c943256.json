{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MinhooMinh\\\\Downloads\\\\SWP\\\\AttendanceManagementPayrollSystem\\\\ClientApp\\\\src\\\\pages\\\\EmployeeKpiPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport KpiPageBase from \"./KpiPageBase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EmployeeKpiPage() {\n  _s();\n  const [kpi, setKpi] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [month, setMonth] = useState(new Date().getMonth() + 1);\n  const [year, setYear] = useState(new Date().getFullYear());\n\n  // Get employee info from localStorage\n  const emp = JSON.parse(localStorage.getItem(\"employee\"));\n  const empId = emp === null || emp === void 0 ? void 0 : emp.empId;\n  useEffect(() => {\n    if (!empId) return;\n    fetchKpi(empId, month, year);\n  }, [empId, month, year]);\n  async function fetchKpi(empId, month, year) {\n    setLoading(true);\n    try {\n      const res = await fetch(`http://localhost:5038/api/kpi/self/${empId}?month=${month}&year=${year}`);\n      if (!res.ok) throw new Error(\"Failed to fetch KPI\");\n      const data = await res.json();\n      setKpi(data);\n    } catch (err) {\n      console.error(err);\n      setKpi(null);\n    } finally {\n      setLoading(false);\n    }\n  }\n  function handlePeriodChange(newMonth, newYear) {\n    setMonth(newMonth);\n    setYear(newYear);\n  }\n  function handleSave(updatedComponents) {\n    // For employee self scoring; example only\n    setKpi(prev => ({\n      ...prev,\n      components: updatedComponents\n    }));\n  }\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"\\u0110ang t\\u1EA3i KPI...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(KpiPageBase, {\n    kpiDto: kpi,\n    onPeriodChange: handlePeriodChange,\n    onSave: handleSave\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n_s(EmployeeKpiPage, \"cWUGIhpA0znSIceX1VDt1uuIGbw=\");\n_c = EmployeeKpiPage;\nvar _c;\n$RefreshReg$(_c, \"EmployeeKpiPage\");","map":{"version":3,"names":["React","useEffect","useState","KpiPageBase","jsxDEV","_jsxDEV","EmployeeKpiPage","_s","kpi","setKpi","loading","setLoading","month","setMonth","Date","getMonth","year","setYear","getFullYear","emp","JSON","parse","localStorage","getItem","empId","fetchKpi","res","fetch","ok","Error","data","json","err","console","error","handlePeriodChange","newMonth","newYear","handleSave","updatedComponents","prev","components","children","fileName","_jsxFileName","lineNumber","columnNumber","kpiDto","onPeriodChange","onSave","_c","$RefreshReg$"],"sources":["C:/Users/MinhooMinh/Downloads/SWP/AttendanceManagementPayrollSystem/ClientApp/src/pages/EmployeeKpiPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport KpiPageBase from \"./KpiPageBase\";\r\n\r\nexport default function EmployeeKpiPage() {\r\n    const [kpi, setKpi] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [month, setMonth] = useState(new Date().getMonth() + 1);\r\n    const [year, setYear] = useState(new Date().getFullYear());\r\n\r\n    // Get employee info from localStorage\r\n    const emp = JSON.parse(localStorage.getItem(\"employee\"));\r\n    const empId = emp?.empId;\r\n\r\n    useEffect(() => {\r\n        if (!empId) return;\r\n        fetchKpi(empId, month, year);\r\n    }, [empId, month, year]);\r\n\r\n    async function fetchKpi(empId, month, year) {\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetch(`http://localhost:5038/api/kpi/self/${empId}?month=${month}&year=${year}`);\r\n            if (!res.ok) throw new Error(\"Failed to fetch KPI\");\r\n            const data = await res.json();\r\n            setKpi(data);\r\n        } catch (err) {\r\n            console.error(err);\r\n            setKpi(null);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    function handlePeriodChange(newMonth, newYear) {\r\n        setMonth(newMonth);\r\n        setYear(newYear);\r\n    }\r\n\r\n    function handleSave(updatedComponents) {\r\n        // For employee self scoring; example only\r\n        setKpi(prev => ({\r\n            ...prev,\r\n            components: updatedComponents,\r\n        }));\r\n    }\r\n\r\n    if (loading) return <p>Đang tải KPI...</p>;\r\n\r\n    return (\r\n        <KpiPageBase\r\n            kpiDto={kpi}\r\n            onPeriodChange={handlePeriodChange}\r\n            onSave={handleSave}\r\n        />\r\n    );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,WAAW,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,eAAe,SAASC,eAAeA,CAAA,EAAG;EAAAC,EAAA;EACtC,MAAM,CAACC,GAAG,EAAEC,MAAM,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EACpC,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACU,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,IAAIY,IAAI,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;EAC7D,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC,IAAIY,IAAI,CAAC,CAAC,CAACI,WAAW,CAAC,CAAC,CAAC;;EAE1D;EACA,MAAMC,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAAC;EACxD,MAAMC,KAAK,GAAGL,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEK,KAAK;EAExBvB,SAAS,CAAC,MAAM;IACZ,IAAI,CAACuB,KAAK,EAAE;IACZC,QAAQ,CAACD,KAAK,EAAEZ,KAAK,EAAEI,IAAI,CAAC;EAChC,CAAC,EAAE,CAACQ,KAAK,EAAEZ,KAAK,EAAEI,IAAI,CAAC,CAAC;EAExB,eAAeS,QAAQA,CAACD,KAAK,EAAEZ,KAAK,EAAEI,IAAI,EAAE;IACxCL,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACA,MAAMe,GAAG,GAAG,MAAMC,KAAK,CAAC,sCAAsCH,KAAK,UAAUZ,KAAK,SAASI,IAAI,EAAE,CAAC;MAClG,IAAI,CAACU,GAAG,CAACE,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,qBAAqB,CAAC;MACnD,MAAMC,IAAI,GAAG,MAAMJ,GAAG,CAACK,IAAI,CAAC,CAAC;MAC7BtB,MAAM,CAACqB,IAAI,CAAC;IAChB,CAAC,CAAC,OAAOE,GAAG,EAAE;MACVC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MAClBvB,MAAM,CAAC,IAAI,CAAC;IAChB,CAAC,SAAS;MACNE,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ;EAEA,SAASwB,kBAAkBA,CAACC,QAAQ,EAAEC,OAAO,EAAE;IAC3CxB,QAAQ,CAACuB,QAAQ,CAAC;IAClBnB,OAAO,CAACoB,OAAO,CAAC;EACpB;EAEA,SAASC,UAAUA,CAACC,iBAAiB,EAAE;IACnC;IACA9B,MAAM,CAAC+B,IAAI,KAAK;MACZ,GAAGA,IAAI;MACPC,UAAU,EAAEF;IAChB,CAAC,CAAC,CAAC;EACP;EAEA,IAAI7B,OAAO,EAAE,oBAAOL,OAAA;IAAAqC,QAAA,EAAG;EAAe;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAG,CAAC;EAE1C,oBACIzC,OAAA,CAACF,WAAW;IACR4C,MAAM,EAAEvC,GAAI;IACZwC,cAAc,EAAEb,kBAAmB;IACnCc,MAAM,EAAEX;EAAW;IAAAK,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtB,CAAC;AAEV;AAACvC,EAAA,CApDuBD,eAAe;AAAA4C,EAAA,GAAf5C,eAAe;AAAA,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}