{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MinhooMinh\\\\Downloads\\\\SWP\\\\AttendanceManagementPayrollSystem\\\\ClientApp\\\\src\\\\pages\\\\KpiPageBase.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport KpiComponentTable from \"../components/KpiComponentTable\";\nimport MonthYearSelector from \"../components/MonthYearSelector\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function KpiPageBase({\n  kpiDto,\n  onPeriodChange,\n  // (month, year) => void\n  onSave,\n  // (updatedComponents) => void\n  onAddComponent // optional: () => void\n}) {\n  _s();\n  const [month, setMonth] = useState(new Date().getMonth() + 1);\n  const [year, setYear] = useState(new Date().getFullYear());\n\n  // Keep state in sync with DTO when loaded\n  useEffect(() => {\n    if (kpiDto) {\n      setMonth(kpiDto.periodMonth);\n      setYear(kpiDto.periodYear);\n    }\n  }, [kpiDto]);\n\n  // Case: KPI not found\n  if (!kpiDto) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"20px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"KPI\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MonthYearSelector, {\n        value: {\n          month,\n          year\n        },\n        onSearch: (m, y) => {\n          setMonth(m);\n          setYear(y);\n          onPeriodChange(m, y);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Kh\\xF4ng c\\xF3 d\\u1EEF li\\u1EC7u KPI cho giai \\u0111o\\u1EA1n n\\xE0y.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 13\n    }, this);\n  }\n  const {\n    components,\n    kpiMode\n  } = kpiDto;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"KPI \", month, \"/\", year, \" \\u2014 Mode: \", kpiMode]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MonthYearSelector, {\n      value: {\n        month,\n        year\n      },\n      onSearch: (m, y) => {\n        setMonth(m);\n        setYear(y);\n        onPeriodChange(m, y);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(KpiComponentTable, {\n      components: components,\n      mode: kpiMode,\n      onChange: (id, field, value) => {\n        const updated = components.map(c => c.kpiComponentId === id ? {\n          ...c,\n          [field]: value\n        } : c);\n        onSave(updated);\n      },\n      onSave: () => onSave(components)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), kpiMode === \"assign\" && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onAddComponent,\n      style: {\n        marginTop: \"15px\",\n        padding: \"8px 14px\"\n      },\n      children: \"Th\\xEAm th\\xE0nh ph\\u1EA7n KPI\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n}\n_s(KpiPageBase, \"UHOQBqSSLS34RKqYeuVYu+m7e40=\");\n_c = KpiPageBase;\nvar _c;\n$RefreshReg$(_c, \"KpiPageBase\");","map":{"version":3,"names":["React","useState","useEffect","KpiComponentTable","MonthYearSelector","jsxDEV","_jsxDEV","KpiPageBase","kpiDto","onPeriodChange","onSave","onAddComponent","_s","month","setMonth","Date","getMonth","year","setYear","getFullYear","periodMonth","periodYear","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onSearch","m","y","components","kpiMode","mode","onChange","id","field","updated","map","c","kpiComponentId","onClick","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/MinhooMinh/Downloads/SWP/AttendanceManagementPayrollSystem/ClientApp/src/pages/KpiPageBase.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport KpiComponentTable from \"../components/KpiComponentTable\";\r\nimport MonthYearSelector from \"../components/MonthYearSelector\";\r\n\r\nexport default function KpiPageBase({\r\n    kpiDto,\r\n    onPeriodChange,  // (month, year) => void\r\n    onSave,           // (updatedComponents) => void\r\n    onAddComponent    // optional: () => void\r\n}) {\r\n    const [month, setMonth] = useState(new Date().getMonth() + 1);\r\n    const [year, setYear] = useState(new Date().getFullYear());\r\n\r\n    // Keep state in sync with DTO when loaded\r\n    useEffect(() => {\r\n        if (kpiDto) {\r\n            setMonth(kpiDto.periodMonth);\r\n            setYear(kpiDto.periodYear);\r\n        }\r\n    }, [kpiDto]);\r\n\r\n    // Case: KPI not found\r\n    if (!kpiDto) {\r\n        return (\r\n            <div style={{ padding: \"20px\" }}>\r\n                <h2>KPI</h2>\r\n                <MonthYearSelector\r\n                    value={{ month, year }}\r\n                    onSearch={(m, y) => {\r\n                        setMonth(m);\r\n                        setYear(y);\r\n                        onPeriodChange(m, y);\r\n                    }}\r\n                />\r\n                <p>Không có dữ liệu KPI cho giai đoạn này.</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const { components, kpiMode } = kpiDto;\r\n\r\n    return (\r\n        <div style={{ padding: \"20px\" }}>\r\n            <h2>KPI {month}/{year} — Mode: {kpiMode}</h2>\r\n\r\n            <MonthYearSelector\r\n                value={{ month, year }}\r\n                onSearch={(m, y) => {\r\n                    setMonth(m);\r\n                    setYear(y);\r\n                    onPeriodChange(m, y);\r\n                }}\r\n            />\r\n\r\n            <KpiComponentTable\r\n                components={components}\r\n                mode={kpiMode}\r\n                onChange={(id, field, value) => {\r\n                    const updated = components.map(c =>\r\n                        c.kpiComponentId === id ? { ...c, [field]: value } : c\r\n                    );\r\n                    onSave(updated);\r\n                }}\r\n                onSave={() => onSave(components)}\r\n            />\r\n\r\n            {kpiMode === \"assign\" && (\r\n                <button\r\n                    onClick={onAddComponent}\r\n                    style={{ marginTop: \"15px\", padding: \"8px 14px\" }}\r\n                >\r\n                    Thêm thành phần KPI\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}