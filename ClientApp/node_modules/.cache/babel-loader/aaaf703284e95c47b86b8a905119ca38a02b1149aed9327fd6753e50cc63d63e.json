{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MinhooMinh\\\\Downloads\\\\SWP\\\\AttendanceManagementPayrollSystem\\\\ClientApp\\\\src\\\\pages\\\\KpiPageBase.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport KpiComponentTable from \"../components/KpiComponentTable\";\nimport MonthYearSelector from \"../components/MonthYearSelector\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function KpiPageBase({\n  role\n}) {\n  _s();\n  const [selectedEmployee, setSelectedEmployee] = useState(null);\n  const [selectedPeriod, setSelectedPeriod] = useState({\n    month: 10,\n    year: 2025\n  });\n  const [components, setComponents] = useState([]);\n  const [mode, setMode] = useState(\"view\");\n  useEffect(() => {\n    if (selectedEmployee) {\n      fetchKpi(selectedEmployee.empId, selectedPeriod.month, selectedPeriod.year);\n    }\n  }, [selectedEmployee, selectedPeriod]);\n  const fetchKpi = async (empId, month, year) => {\n    // Fetch from API like `/api/kpi?empId=...&month=...&year=...`\n    // Simulate:\n    const fake = [{\n      kpiComponentId: 1,\n      name: \"Sales\",\n      description: \"Sales performance\",\n      targetValue: 100,\n      achievedValue: 80,\n      weight: 50,\n      selfScore: 8,\n      assignedScore: 7\n    }, {\n      kpiComponentId: 2,\n      name: \"Attendance\",\n      description: \"On-time presence\",\n      targetValue: 30,\n      achievedValue: 29,\n      weight: 50,\n      selfScore: 9,\n      assignedScore: 8\n    }];\n    setComponents(fake);\n  };\n  const handleSave = updated => {\n    console.log(\"Saving KPI for\", selectedEmployee, updated);\n  };\n\n  // Determine mode by role\n  let effectiveMode = \"view\";\n  if (role === \"employee\") effectiveMode = \"self\";\n  if (role === \"dephead\") effectiveMode = \"view\";\n  if (role === \"manager\") effectiveMode = \"assign\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"KPI Management (\", role, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MonthYearSelector, {\n      value: selectedPeriod,\n      onChange: p => setSelectedPeriod(p)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this), (role === \"dephead\" || role === \"manager\") && /*#__PURE__*/_jsxDEV(EmployeeSelector, {\n      role: role,\n      onSelect: setSelectedEmployee\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }, this), selectedEmployee && /*#__PURE__*/_jsxDEV(KpiComponentTable, {\n      components: components,\n      mode: effectiveMode,\n      onChange: (id, f, v) => setComponents(prev => prev.map(c => c.kpiComponentId === id ? {\n        ...c,\n        [f]: v\n      } : c)),\n      onSave: handleSave\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 9\n  }, this);\n}\n_s(KpiPageBase, \"lJwtiCNPaxSSu/pryCoVMIgcgBM=\");\n_c = KpiPageBase;\nvar _c;\n$RefreshReg$(_c, \"KpiPageBase\");","map":{"version":3,"names":["React","useState","useEffect","KpiComponentTable","MonthYearSelector","jsxDEV","_jsxDEV","KpiPageBase","role","_s","selectedEmployee","setSelectedEmployee","selectedPeriod","setSelectedPeriod","month","year","components","setComponents","mode","setMode","fetchKpi","empId","fake","kpiComponentId","name","description","targetValue","achievedValue","weight","selfScore","assignedScore","handleSave","updated","console","log","effectiveMode","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","p","EmployeeSelector","onSelect","id","f","v","prev","map","c","onSave","_c","$RefreshReg$"],"sources":["C:/Users/MinhooMinh/Downloads/SWP/AttendanceManagementPayrollSystem/ClientApp/src/pages/KpiPageBase.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport KpiComponentTable from \"../components/KpiComponentTable\";\nimport MonthYearSelector from \"../components/MonthYearSelector\";\n\nexport default function KpiPageBase({ role }) {\n    const [selectedEmployee, setSelectedEmployee] = useState(null);\n    const [selectedPeriod, setSelectedPeriod] = useState({ month: 10, year: 2025 });\n    const [components, setComponents] = useState([]);\n    const [mode, setMode] = useState(\"view\");\n\n    useEffect(() => {\n        if (selectedEmployee) {\n            fetchKpi(selectedEmployee.empId, selectedPeriod.month, selectedPeriod.year);\n        }\n    }, [selectedEmployee, selectedPeriod]);\n\n    const fetchKpi = async (empId, month, year) => {\n        // Fetch from API like `/api/kpi?empId=...&month=...&year=...`\n        // Simulate:\n        const fake = [\n            { kpiComponentId: 1, name: \"Sales\", description: \"Sales performance\", targetValue: 100, achievedValue: 80, weight: 50, selfScore: 8, assignedScore: 7 },\n            { kpiComponentId: 2, name: \"Attendance\", description: \"On-time presence\", targetValue: 30, achievedValue: 29, weight: 50, selfScore: 9, assignedScore: 8 }\n        ];\n        setComponents(fake);\n    };\n\n    const handleSave = (updated) => {\n        console.log(\"Saving KPI for\", selectedEmployee, updated);\n    };\n\n    // Determine mode by role\n    let effectiveMode = \"view\";\n    if (role === \"employee\") effectiveMode = \"self\";\n    if (role === \"dephead\") effectiveMode = \"view\";\n    if (role === \"manager\") effectiveMode = \"assign\";\n\n    return (\n        <div style={{ padding: \"20px\" }}>\n            <h2>KPI Management ({role})</h2>\n\n            <MonthYearSelector\n                value={selectedPeriod}\n                onChange={(p) => setSelectedPeriod(p)}\n            />\n\n            {(role === \"dephead\" || role === \"manager\") && (\n                <EmployeeSelector\n                    role={role}\n                    onSelect={setSelectedEmployee}\n                />\n            )}\n\n            {selectedEmployee && (\n                <KpiComponentTable\n                    components={components}\n                    mode={effectiveMode}\n                    onChange={(id, f, v) =>\n                        setComponents((prev) =>\n                            prev.map((c) =>\n                                c.kpiComponentId === id ? { ...c, [f]: v } : c\n                            )\n                        )\n                    }\n                    onSave={handleSave}\n                />\n            )}\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}