@using AttendanceManagementPayrollSystem.DTO

@code {
    [Parameter] public List<PayRunItemDto>? Items { get; set; }
    [Parameter] public EventCallback<PayRunItemDto> OnItemSelected { get; set; }

    private async Task SelectItem(PayRunItemDto item)
    {
        if (OnItemSelected.HasDelegate)
            await OnItemSelected.InvokeAsync(item);
    }
}

@if (Items == null || Items.Count == 0)
{
    <p>No pay run items.</p>
}
else
{
    <div class="card p-3">
        <h5>Pay Run Items</h5>
        <table class="table table-bordered table-sm">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Employee</th>
                    <th>Gross</th>
                    <th>Deductions</th>
                    <th>Net</th>
                    <th>Notes</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Items)
                {
                    <tr style="cursor:pointer" @onclick="@(() => SelectItem(item))">
                        <td>@item.ItemId</td>
                        <td>@item.EmpName</td>
                        <td>@item.GrossPay.ToString("C")</td>
                        <td>@item.Deductions.ToString("C")</td>
                        <td>@item.NetPay.ToString("C")</td>
                        <td>@item.Notes</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
